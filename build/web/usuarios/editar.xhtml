<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Editar Usuario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet"/>
</h:head>

<h:body class="bg-light">

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">

                <div class="card shadow-lg border-0">
                    <div class="card-header bg-primary text-white text-center">
                        <h4 class="mb-0">Editar Usuario</h4>
                    </div>

                    <div class="card-body p-4">

                        <h:form enctype="multipart/form-data">
                            <h:inputHidden value="#{usuarioBean.usuario.idUsuario}"/>

                            <div class="row g-3">

                                <!-- ✔ AGREGADO: ROL -->
                                <div class="col-md-6">
                                    <label class="form-label">Rol</label>
                                    <h:selectOneMenu value="#{usuarioBean.usuario.idRol}" styleClass="form-select">
                                        <f:selectItem itemValue="1" itemLabel="Administrador" />
                                        <f:selectItem itemValue="2" itemLabel="Veterinario" />
                                        <f:selectItem itemValue="3" itemLabel="Cliente" />
                                    </h:selectOneMenu>
                                </div>

                                <!-- Tipo Documento -->
                                <div class="col-md-6">
                                    <label class="form-label">Tipo de Documento</label>
                                    <h:selectOneMenu value="#{usuarioBean.usuario.tipoDoc}"
                                                     styleClass="form-select">
                                        <f:selectItem itemValue="CC" itemLabel="C.C" />
                                        <f:selectItem itemValue="TI" itemLabel="T.I" />
                                        <f:selectItem itemValue="CE" itemLabel="C.E" />
                                    </h:selectOneMenu>
                                </div>

                                <!-- Nombre -->
                                <div class="col-md-6">
                                    <label class="form-label">Nombre</label>
                                    <h:inputText value="#{usuarioBean.usuario.nombre}"
                                                 styleClass="form-control"
                                                 required="true"
                                                 requiredMessage="Debe especificar un Nombre"/>
                                </div>

                                <!-- Apellido -->
                                <div class="col-md-6">
                                    <label class="form-label">Apellido</label>
                                    <h:inputText value="#{usuarioBean.usuario.apellido}"
                                                 styleClass="form-control"
                                                 required="true"
                                                 requiredMessage="Debe especificar un Apellido"/>
                                </div>

                                <!-- Correo -->
                                <div class="col-md-6">
                                    <label class="form-label">Correo</label>
                                    <h:inputText value="#{usuarioBean.usuario.correo}"
                                                 styleClass="form-control"/>
                                </div>

                                <!-- Teléfono -->
                                <div class="col-md-6">
                                    <label class="form-label">Teléfono</label>
                                    <h:inputText value="#{usuarioBean.usuario.telefono}"
                                                 styleClass="form-control"/>
                                </div>

                                <!-- Dirección -->
                                <div class="col-md-6">
                                    <label class="form-label">Dirección</label>
                                    <h:inputText value="#{usuarioBean.usuario.direccion}"
                                                 styleClass="form-control"/>
                                </div>

                                <!-- Foto actual -->
                                <div class="col-md-6 text-center">
                                    <label class="form-label">Foto Actual</label><br/>
                                    <h:graphicImage value="/ImagenUsuario?id=#{usuarioBean.usuario.idUsuario}"
                                                    width="150" height="150"
                                                    style="border-radius: 100px; border:1px solid #ccc; object-fit:cover;"/>
                                </div>

                                <!-- Subir nueva foto -->
                                <div class="col-md-6">
                                    <label class="form-label">Cambiar foto</label>
                                    <h:inputFile value="#{usuarioBean.archivoFoto}"
                                                 styleClass="form-control"/>
                                </div>

                            </div>

                            <!-- Botones -->
                            <div class="text-center mt-4">
                                <h:commandButton value="Actualizar"
                                                 styleClass="btn btn-success px-4 me-2"
                                                 actionListener="#{usuarioBean.actualizar}"
                                                 action="index"/>

                                <h:commandButton value="Cancelar"
                                                 styleClass="btn btn-secondary px-4"
                                                 action="index"
                                                 immediate="true"/>
                            </div>

                        </h:form>
                    </div>
                </div>

            </div>
        </div>
    </div>

</h:body>
</html>
