<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Nuevo Usuario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
          rel="stylesheet"/>
</h:head>

<h:body>

    <f:event type="preRenderView" listener="#{usuarioBean.listar}" />

    <h2 class="text-center text-success">Nuevo Usuario</h2>
    <br/>

    <center>
        <h:form enctype="multipart/form-data">
            <h:panelGrid columns="3">

                <h:outputLabel value="Tipo Documento:" for="tipodoc"/>
                <h:selectOneMenu id="tipodoc" value="#{usuarioBean.usuario.tipoDoc}"
                                 class="form-select"
                                 required="true" requiredMessage="Seleccione el tipo de documento">
                    <f:selectItem itemValue="TI" itemLabel="Tarjeta de Identidad"/>
                    <f:selectItem itemValue="CC" itemLabel="Cédula de Ciudadanía"/>
                    <f:selectItem itemValue="CE" itemLabel="Cédula de Extranjería"/>
                </h:selectOneMenu>
                <h:message for="tipodoc" class="text-danger"/>

                <h:outputLabel value="Nombre:" for="nom"/>
                <h:inputText id="nom" value="#{usuarioBean.usuario.nombre}"
                             class="form-control"
                             required="true" requiredMessage="Debe ingresar el nombre"/>
                <h:message for="nom" class="text-danger"/>

                <h:outputLabel value="Apellido:" for="ape"/>
                <h:inputText id="ape" value="#{usuarioBean.usuario.apellido}"
                             class="form-control"
                             required="true" requiredMessage="Debe ingresar el apellido"/>
                <h:message for="ape" class="text-danger"/>

                <h:outputLabel value="Correo:" for="cor"/>
                <h:inputText id="cor" value="#{usuarioBean.usuario.correo}"
                             class="form-control"
                             required="true" requiredMessage="Debe ingresar el correo"/>
                <h:message for="cor" class="text-danger"/>

                <h:outputLabel value="Teléfono:" for="tel"/>
                <h:inputText id="tel" value="#{usuarioBean.usuario.telefono}"
                             class="form-control"
                             required="true" requiredMessage="Debe ingresar el teléfono"/>
                <h:message for="tel" class="text-danger"/>

                <h:outputLabel value="Dirección:" for="dir"/>
                <h:inputText id="dir" value="#{usuarioBean.usuario.direccion}"
                             class="form-control"
                             required="true" requiredMessage="Debe ingresar la dirección"/>
                <h:message for="dir" class="text-danger"/>

                <h:outputLabel value="Contraseña:" for="pass"/>
                <h:inputSecret id="pass" value="#{usuarioBean.usuario.contrasena}"
                               class="form-control"
                               required="true" requiredMessage="Debe ingresar la contraseña"/>
                <h:message for="pass" class="text-danger"/>

                <h:outputLabel value="Foto de Perfil:" for="foto"/>
                <h:inputFile id="foto" value="#{usuarioBean.archivoFoto}"
                             class="form-control"/>
                <h:message for="foto" class="text-danger"/>

                <h:outputLabel value="Rol:" for="rol"/>
                <h:selectOneMenu id="rol" value="#{usuarioBean.usuario.idRol}"
                                 class="form-select"
                                 required="true"
                                 requiredMessage="Seleccione un rol">
                    <f:selectItems value="#{usuarioBean.listaRoles}"
                                   var="r"
                                   itemValue="#{r.idRol}"
                                   itemLabel="#{r.nombreRol}"/>
                </h:selectOneMenu>
                <h:message for="rol" class="text-danger"/>

                <h:column/><h:column><br/></h:column><h:column/>

                <h:column/>
                <h:column>
                    <h:commandButton value="Guardar"
                                     class="btn btn-success"
                                     actionListener="#{usuarioBean.guardar}"
                                     action="index"/>
                    <h:commandButton value="Cancelar"
                                     class="btn btn-secondary"
                                     style="margin-left: 15px;"
                                     action="index"
                                     immediate="true"/>
                </h:column>

            </h:panelGrid>
        </h:form>
    </center>

</h:body>
</html>
