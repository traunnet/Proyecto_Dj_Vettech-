<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

<h:head>
    <title>Iniciar Sesión</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"/>
    <link rel="stylesheet" href="resources/css/login_registro.css"/>
</h:head>

<h:body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-dark nav-custom fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold text-white">Luppy &amp; Sus Mascotas</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="menu">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.xhtml">Volver al inicio</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- FONDO -->
    <div class="fondo"></div>

    <!-- FORMULARIO -->
    <div class="contenedor-form">
        <div class="card form-card">

            <h3 class="text-center mb-3 fw-bold">Iniciar Sesión</h3>

            <h:form id="loginForm">

                <div class="text-center mb-3">
                    <h:graphicImage rendered="#{loginBean.usuario.fotoPerfil != null}"
                                    value="/ImagenUsuario?id=#{loginBean.usuario.idUsuario}"
                                    width="120" height="120" styleClass="avatar"/>

                    <h:graphicImage rendered="#{loginBean.usuario.fotoPerfil == null}"
                                    value="/resources/img/avatar.png"
                                    width="120" height="120" styleClass="avatar"/>
                </div>

                <!-- Correo -->
                <label class="form-label">Correo</label>
                <h:inputText id="correo" value="#{loginBean.usuario.correo}"
                             required="true" requiredMessage="Debe ingresar un correo"
                             styleClass="form-control"/>
                <h:message for="correo" style="color:red"/>

                <!-- Contraseña -->
                <label class="form-label mt-3">Contraseña</label>
                <div class="input-group">
                    <h:inputSecret id="contrasena"
                                   value="#{loginBean.usuario.contrasena}"
                                   required="true"
                                   requiredMessage="Ingrese su contraseña"
                                   styleClass="form-control password-field"/>

                    <span class="input-group-text toggle-pass"><i class="bi bi-eye-fill"></i></span>
                </div>
                <h:message for="contrasena" style="color:red"/>

                <div class="d-grid mt-4">
                    <h:commandButton value="Ingresar" action="#{loginBean.autenticar}"
                                     styleClass="btn btn-primary"/>
                </div>

                <p class="text-center mt-3">
                    <h:outputLink value="registro.xhtml">Crear cuenta</h:outputLink>
                </p>

            </h:form>
        </div>
    </div>
    <footer class="footer-mini text-white text-center p-2">
        <small>Luppy &amp; Sus Mascotas © 2025 · Todos los derechos reservados</small>
    </footer>

    <script>
        document.querySelector(".toggle-pass").onclick = () => {
            const field = document.querySelector(".password-field");
            field.type = field.type === "password" ? "text" : "password";
        };
    </script>

</h:body>
</html>
